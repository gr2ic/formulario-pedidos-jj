
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Pedido - J&J Representações LTDA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
    }
    h2 {
      color: #222;
      text-align: center;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
      box-sizing: border-box;
    }
    .item {
      margin-bottom: 15px;
      border: 1px solid #ccc;
      padding: 10px;
    }
    .button {
      padding: 10px 20px;
      margin-top: 15px;
      background: #000;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    #logo {
      width: 180px;
      display: block;
      margin: 0 auto 20px auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <img id="logo" src="https://drive.google.com/uc?export=view&id=1e3Od-8Q_GpD7UudMzmWmPzUrKQFz5lz9" alt="Logo J&J" />
    <h2>Cadastro de Pedido</h2>
    <form id="pedidoForm">
      <label>Data do Pedido:</label>
      <input type="date" name="data" value="" id="dataPedido" required />
      <label>Vendedor:</label>
      <select name="vendedor">
        <option>Thalyson</option>
        <option>Moises</option>
        <option>Rafael</option>
        <option>Wilian</option>
        <option>Flaviano</option>
      </select>
      <label>CNPJ do Cliente:</label>
      <input type="text" id="cnpj" name="cnpj" required />
      <button type="button" onclick="buscarCNPJ()">Buscar Cliente</button>
      <label>Razão Social:</label>
      <input type="text" id="razao" name="razao" />
      <label>Nome Fantasia:</label>
      <input type="text" id="fantasia" name="fantasia" />
      <label>Endereço:</label>
      <input type="text" id="endereco" name="endereco" />
      <label>Município:</label>
      <input type="text" id="municipio" name="municipio" />
      <label>UF:</label>
      <input type="text" id="uf" name="uf" />
      <label>Observações:</label>
      <textarea name="obs" rows="2"></textarea>

      <div id="itens">
        <div class="item">
          <label>Produto:
            <select name="produto[]">
              <option>1 - Realengo TP 1 6x5 Parboilizado</option>
              <option>3 - Realengo TP 1 30x1 Parboilizado</option>
            </select>
          </label>
          <label>Quantidade: <input name="quantidade[]" /></label>
          <label>Preço Unitário: <input name="preco[]" step="0.01" /></label>
        </div>
      </div>
      <button type="button" class="button" onclick="adicionarItem()">+ Adicionar Produto</button>
    </form>
  </div>

  <script>
    document.getElementById("dataPedido").valueAsDate = new Date();

    async function buscarCNPJ() {
      const cnpj = document.getElementById("cnpj").value.replace(/\D/g, "");
      const res = await fetch(`https://brasilapi.com.br/api/cnpj/v1/${cnpj}`);
      const data = await res.json();
      document.getElementById("razao").value = data.razao_social || "";
      document.getElementById("fantasia").value = data.nome_fantasia || "";
      document.getElementById("endereco").value = (data.logradouro || "") + ", " + (data.numero || "") + " - " + (data.bairro || "");
      document.getElementById("municipio").value = data.municipio || "";
      document.getElementById("uf").value = data.uf || "";
    }

    function adicionarItem() {
      const container = document.getElementById("itens");
      const item = document.createElement("div");
      item.className = "item";
      item.innerHTML = `
        <label>Produto:
          <select name="produto[]">
            <option>1 - Realengo TP 1 6x5 Parboilizado</option>
            <option>3 - Realengo TP 1 30x1 Parboilizado</option>
          </select>
        </label>
        <label>Quantidade: <input name="quantidade[]" /></label>
        <label>Preço Unitário: <input name="preco[]" step="0.01" /></label>
      `;
      container.appendChild(item);
    }
  </script>
</body>
</html>
